Starting lightweight test...
GlfwRequiredInstanceExtensions: 2
  VK_KHR_surface
  VK_KHR_win32_surface
Supported Instance Extensions:
  VK_KHR_device_group_creation
  VK_KHR_external_fence_capabilities
  VK_KHR_external_memory_capabilities
  VK_KHR_external_semaphore_capabilities
  VK_KHR_get_physical_device_properties2
  VK_KHR_get_surface_capabilities2
  VK_KHR_surface
  VK_KHR_win32_surface
  VK_EXT_debug_report
  VK_EXT_debug_utils
  VK_EXT_swapchain_colorspace
  VK_KHR_display
  VK_KHR_get_display_properties2
  VK_KHR_surface_protected_capabilities
  VK_EXT_direct_mode_display
  VK_EXT_surface_maintenance1
  VK_NV_external_memory_capabilities
  VK_KHR_portability_enumeration
  VK_LUNARG_direct_driver_loading
Required Instance Extensions:
  VK_KHR_surface
  VK_KHR_win32_surface
  VK_KHR_portability_enumeration
Available instance layers:
  VK_LAYER_AMD_switchable_graphics
  VK_LAYER_EOS_Overlay
  VK_LAYER_EOS_Overlay
  VK_LAYER_KHRONOS_profiles
  VK_LAYER_KHRONOS_shader_object
  VK_LAYER_KHRONOS_synchronization2
  VK_LAYER_KHRONOS_validation
  VK_LAYER_LUNARG_api_dump
  VK_LAYER_LUNARG_crash_diagnostic
  VK_LAYER_LUNARG_gfxreconstruct
  VK_LAYER_LUNARG_monitor
  VK_LAYER_LUNARG_screenshot
  VK_LAYER_NV_optimus
  VK_LAYER_NV_present
  VK_LAYER_OBS_HOOK
  VK_LAYER_RENDERDOC_Capture
  VK_LAYER_VALVE_steam_fossilize
  VK_LAYER_VALVE_steam_overlay

Available physical devices: 2
  0 NVIDIA GeForce RTX 4060 (Discrete GPU)
  1 AMD Radeon(TM) Graphics (Integrated GPU)
Selected NVIDIA GeForce RTX 4060 (Discrete GPU)
  nonCoherentAtomSize: 64
  Max UBO size: 64 KBytes
  Max SSBO size: 4194303 KBytes
  UBO offset alignment: 64
  SSBO offset alignment: 16

Device Features:
  geometryShader: YES
  tessellationShader: YES

Device Memory Properties:
  Memory Type Count: 5
    Memory Type 0: heap 1, flags: NONE 
    Memory Type 1: heap 0, flags: DEVICE_LOCAL 
    Memory Type 2: heap 1, flags: HOST_VISIBLE HOST_COHERENT 
    Memory Type 3: heap 1, flags: HOST_VISIBLE HOST_COHERENT HOST_CACHED 
    Memory Type 4: heap 0, flags: DEVICE_LOCAL HOST_VISIBLE HOST_COHERENT 
  Memory Heap Count: 2
    Memory Heap 0: 7957 MB, flags: DEVICE_LOCAL 
    Memory Heap 1: 15915 MB, flags: NONE 

Queue Family Properties: 6
  Queue Family 0: 16 queues, flags: GRAPHICS COMPUTE TRANSFER SPARSE_BINDING 
  Queue Family 1: 2 queues, flags: TRANSFER SPARSE_BINDING 
  Queue Family 2: 8 queues, flags: COMPUTE TRANSFER SPARSE_BINDING 
  Queue Family 3: 1 queues, flags: TRANSFER SPARSE_BINDING VIDEO_DECODE 
  Queue Family 4: 1 queues, flags: TRANSFER SPARSE_BINDING VIDEO_ENCODE 
  Queue Family 5: 1 queues, flags: TRANSFER SPARSE_BINDING OPTICAL_FLOW 
Descriptor indexing features supported:
  descriptorBindingPartiallyBound: YES
  runtimeDescriptorArray: YES
  descriptorBindingVariableDescriptorCount: YES
Found DescriptorPoolSize.txt, loading previous statistics...
Created initial pool with 11 sets and 4 descriptor types
Selected Surface Format: R8G8B8A8_UNORM
Selected Color Space: VK_COLOR_SPACE_SRGB_NONLINEAR_KHR
Swapchain Storage Bit Support: YES
Available Present Modes: 5
  VK_PRESENT_MODE_FIFO_KHR
  VK_PRESENT_MODE_FIFO_RELAXED_KHR
  VK_PRESENT_MODE_MAILBOX_KHR
  VK_PRESENT_MODE_IMMEDIATE_KHR
  VK_PRESENT_MODE_UNKNOWN
Selected Present Mode: VK_PRESENT_MODE_IMMEDIATE_KHR
Designed Num of Swapchain Images: 3
Added VK_IMAGE_USAGE_STORAGE_BIT to swapchain

=== Shader Manager Binding Information ===
Pipeline 'shadowMap': 1 sets
  Set 0: 3 bindings
    Binding 0: name='sceneData', set=0, binding=0, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=VERTEX_SHADER
    Binding 1: name='options', set=0, binding=1, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=VERTEX_SHADER
    Binding 2: name='boneData', set=0, binding=2, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=VERTEX_SHADER
Pipeline 'pbrForward': 4 sets
  Set 0: 3 bindings
    Binding 0: name='sceneData', set=0, binding=0, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 1: name='options', set=0, binding=1, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 2: name='boneData', set=0, binding=2, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=VERTEX_SHADER
  Set 1: 2 bindings
    Binding 0: name='materialBuffer', set=1, binding=0, writeonly=false, layout=UNDEFINED, access=SHADER_READ|SHADER_WRITE, stage=FRAGMENT_SHADER
    Binding 1: name='materialTextures', set=1, binding=1, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
  Set 2: 3 bindings
    Binding 0: name='prefilteredMap', set=2, binding=0, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 1: name='irradianceMap', set=2, binding=1, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 2: name='brdfLut', set=2, binding=2, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
  Set 3: 1 bindings
    Binding 0: name='shadowMap', set=3, binding=0, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
Pipeline 'pbrDeferred': 2 sets
  Set 0: 3 bindings
    Binding 0: name='sceneData', set=0, binding=0, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 1: name='options', set=0, binding=1, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 2: name='boneData', set=0, binding=2, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=VERTEX_SHADER
  Set 1: 2 bindings
    Binding 0: name='materialBuffer', set=1, binding=0, writeonly=false, layout=UNDEFINED, access=SHADER_READ|SHADER_WRITE, stage=FRAGMENT_SHADER
    Binding 1: name='materialTextures', set=1, binding=1, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
Pipeline 'gui': 1 sets
  Set 0: 1 bindings
    Binding 0: name='fontSampler', set=0, binding=0, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
Pipeline 'sky': 2 sets
  Set 0: 2 bindings
    Binding 0: name='sceneData', set=0, binding=0, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=VERTEX_SHADER
    Binding 1: name='skyOptions', set=0, binding=1, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=FRAGMENT_SHADER
  Set 1: 3 bindings
    Binding 0: name='prefilteredMap', set=1, binding=0, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 1: name='irradianceMap', set=1, binding=1, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 2: name='brdfLut', set=1, binding=2, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
Pipeline 'ssao': 1 sets
  Set 0: 5 bindings
    Binding 0: name='sceneData', set=0, binding=0, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 1: name='ssaoOptions', set=0, binding=1, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 2: name='floatColor1', set=0, binding=2, writeonly=false, layout=GENERAL, access=SHADER_READ|SHADER_WRITE, stage=COMPUTE_SHADER
    Binding 3: name='floatColor2', set=0, binding=3, writeonly=true, layout=GENERAL, access=SHADER_WRITE, stage=COMPUTE_SHADER
    Binding 4: name='depthStencil', set=0, binding=4, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
Pipeline 'deferredLighting': 1 sets
  Set 0: 14 bindings
    Binding 0: name='sceneData', set=0, binding=0, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 1: name='options', set=0, binding=1, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 2: name='ssaoOptions', set=0, binding=2, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 3: name='floatColor1', set=0, binding=3, writeonly=false, layout=GENERAL, access=SHADER_READ|SHADER_WRITE, stage=COMPUTE_SHADER
    Binding 4: name='floatColor2', set=0, binding=4, writeonly=true, layout=GENERAL, access=SHADER_WRITE, stage=COMPUTE_SHADER
    Binding 5: name='depthStencil', set=0, binding=5, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 6: name='gAlbedo', set=0, binding=6, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 7: name='gNormal', set=0, binding=7, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 8: name='gPosition', set=0, binding=8, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 9: name='gMaterial', set=0, binding=9, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 10: name='shadowMap', set=0, binding=10, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 11: name='prefilteredMap', set=0, binding=11, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 12: name='irradianceMap', set=0, binding=12, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
    Binding 13: name='brdfLut', set=0, binding=13, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=COMPUTE_SHADER
Pipeline 'post': 1 sets
  Set 0: 3 bindings
    Binding 0: name='floatColor2', set=0, binding=0, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 1: name='postOptions', set=0, binding=1, writeonly=false, layout=UNDEFINED, access=SHADER_READ, stage=FRAGMENT_SHADER
    Binding 2: name='depthStencil', set=0, binding=2, writeonly=false, layout=SHADER_READ_ONLY_OPTIMAL, access=SHADER_READ, stage=FRAGMENT_SHADER
==========================================

    Binding 1 is variable-length array (count=512)
ShaderManager: Created 8 unique layout(s)
  Layout 0 (0x274845feba0): 3 binding(s), used by:
    - Pipeline 'post', Set 0
    Binding 0: type=COMBINED_IMAGE_SAMPLER, count=1, stages=FRAGMENT
    Binding 1: type=UNIFORM_BUFFER, count=1, stages=FRAGMENT
    Binding 2: type=COMBINED_IMAGE_SAMPLER, count=1, stages=FRAGMENT
  Layout 1 (0x274845fd6a0): 3 binding(s), used by:
    - Pipeline 'shadowMap', Set 0
    - Pipeline 'pbrForward', Set 0
    - Pipeline 'pbrDeferred', Set 0
    Binding 0: type=UNIFORM_BUFFER, count=1, stages=VERTEX|FRAGMENT
    Binding 1: type=UNIFORM_BUFFER, count=1, stages=VERTEX|FRAGMENT
    Binding 2: type=UNIFORM_BUFFER, count=1, stages=VERTEX|FRAGMENT
  Layout 2 (0x274845fd820): 2 binding(s), used by:
    - Pipeline 'pbrForward', Set 1
    - Pipeline 'pbrDeferred', Set 1
    Binding 0: type=STORAGE_BUFFER, count=1, stages=FRAGMENT
    Binding 1: type=COMBINED_IMAGE_SAMPLER, count=512, stages=FRAGMENT
  Layout 3 (0x274845fed20): 2 binding(s), used by:
    - Pipeline 'sky', Set 0
    Binding 0: type=UNIFORM_BUFFER, count=1, stages=VERTEX|FRAGMENT
    Binding 1: type=UNIFORM_BUFFER, count=1, stages=VERTEX|FRAGMENT
  Layout 4 (0x274845fe5a0): 1 binding(s), used by:
    - Pipeline 'pbrForward', Set 3
    - Pipeline 'gui', Set 0
    Binding 0: type=COMBINED_IMAGE_SAMPLER, count=1, stages=FRAGMENT
  Layout 5 (0x274845fe420): 3 binding(s), used by:
    - Pipeline 'pbrForward', Set 2
    - Pipeline 'sky', Set 1
    Binding 0: type=COMBINED_IMAGE_SAMPLER, count=1, stages=FRAGMENT
    Binding 1: type=COMBINED_IMAGE_SAMPLER, count=1, stages=FRAGMENT
    Binding 2: type=COMBINED_IMAGE_SAMPLER, count=1, stages=FRAGMENT
  Layout 6 (0x274845fe720): 14 binding(s), used by:
    - Pipeline 'deferredLighting', Set 0
    Binding 0: type=UNIFORM_BUFFER, count=1, stages=COMPUTE
    Binding 1: type=UNIFORM_BUFFER, count=1, stages=COMPUTE
    Binding 2: type=UNIFORM_BUFFER, count=1, stages=COMPUTE
    Binding 3: type=STORAGE_IMAGE, count=1, stages=COMPUTE
    Binding 4: type=STORAGE_IMAGE, count=1, stages=COMPUTE
    Binding 5: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
    Binding 6: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
    Binding 7: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
    Binding 8: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
    Binding 9: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
    Binding 10: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
    Binding 11: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
    Binding 12: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
    Binding 13: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
  Layout 7 (0x274ebb4b730): 5 binding(s), used by:
    - Pipeline 'ssao', Set 0
    Binding 0: type=UNIFORM_BUFFER, count=1, stages=COMPUTE
    Binding 1: type=UNIFORM_BUFFER, count=1, stages=COMPUTE
    Binding 2: type=STORAGE_IMAGE, count=1, stages=COMPUTE
    Binding 3: type=STORAGE_IMAGE, count=1, stages=COMPUTE
    Binding 4: type=COMBINED_IMAGE_SAMPLER, count=1, stages=COMPUTE
Creating graphics pipeline from config: gui
Successfully created graphics pipeline: gui
Initializing BinRenderer with EngineConfig...
  Assets path: ../../assets/
  Shader path: ../../assets/shaders/
  Max frames in flight: 2
  Validation layers: Enabled
ResourceRegistry initialized
? Selected HDR format: B10G11R11_UFLOAT_PACK32 (4 bytes/pixel, FLOAT, 50% memory vs RGBA16F)
HDR Format Selection:
  Selected format: B10G11R11_UFLOAT_PACK32 (4 bytes/pixel)
Creating graphics pipeline from config: pbrDeferred
Successfully created graphics pipeline: pbrDeferred
Creating graphics pipeline from config: sky
Successfully created graphics pipeline: sky
Creating graphics pipeline from config: post
Successfully created graphics pipeline: post
Creating graphics pipeline from config: shadowMap
Successfully created graphics pipeline: shadowMap
Creating compute pipeline: deferredLighting

Successfully created compute pipeline

Compute shader 'deferredLighting.comp' local workgroup size: 16x16x1
Pipeline 'deferredLighting' initialized with local workgroup size: 16x16x1
Loading IBL textures...
  Prefiltered: ../../assets/textures/golden_gate_hills_4k/specularGGX.ktx2
  Irradiance: ../../assets/textures/golden_gate_hills_4k/diffuseLambertian.ktx2
  BRDF LUT: ../../assets/textures/golden_gate_hills_4k/outputLUT.png
DEBUG: Registered image resource 'prefilteredMap' with handle 1
DEBUG: Registered image resource 'irradianceMap' with handle 2
DEBUG: Registered image resource 'brdfLut' with handle 3
? IBL textures loaded successfully
Creating HDR render targets:
  Format: B10G11R11_UFLOAT_PACK32 (4 bytes/pixel)
HDR Memory Analysis:
  Resolution: 1728x972 (no MSAA)
  Current format memory: 19 MB
  Standard RGBA16F memory: 38 MB
  Memory savings: 50.0%
  Quality: ? GOOD - B10G11R11 excellent for HDR with memory savings
DEBUG: Registered image resource 'floatColor1' with handle 4
DEBUG: Registered image resource 'floatColor2' with handle 5
? HDR render targets created successfully
Creating G-buffer textures for deferred rendering:
  gAlbedo: R8G8B8A8_UNORM (4 bytes/pixel)
  gNormal: UNKNOWN_FORMAT(97) (8 bytes/pixel)
  gPosition: UNKNOWN_FORMAT(109) (16 bytes/pixel)
  gMaterial: R8G8B8A8_UNORM (4 bytes/pixel)
DEBUG: Registered image resource 'gAlbedo' with handle 6
DEBUG: Registered image resource 'gNormal' with handle 7
DEBUG: Registered image resource 'gPosition' with handle 8
DEBUG: Registered image resource 'gMaterial' with handle 9
? G-buffer creation complete
DEBUG: Registered image resource 'depthStencil' with handle 10
DEBUG: Registered image resource 'shadowMap' with handle 11
? Depth and shadow buffers created successfully
? All textures and render targets created successfully
DEBUG: Registered buffer 'sceneData_0' with handle 1
DEBUG: Registered buffer 'options_0' with handle 2
DEBUG: Registered buffer 'skyOptions_0' with handle 3
DEBUG: Registered buffer 'postOptions_0' with handle 4
DEBUG: Registered buffer 'ssaoOptions_0' with handle 5
DEBUG: Registered buffer 'boneData_0' with handle 6
DEBUG: Registered buffer 'sceneData_1' with handle 7
DEBUG: Registered buffer 'options_1' with handle 8
DEBUG: Registered buffer 'skyOptions_1' with handle 9
DEBUG: Registered buffer 'postOptions_1' with handle 10
DEBUG: Registered buffer 'ssaoOptions_1' with handle 11
DEBUG: Registered buffer 'boneData_1' with handle 12
? Created 6 uniform buffer types × 2 frames = 12 total buffers
WARNING: No models provided, creating dummy material buffer
Pipeline 'shadowMap': No write-only image binding found for dimension determination
Allocating descriptor set with variable count: 512
Pipeline 'pbrDeferred': No write-only image binding found for dimension determination
Pipeline 'sky': No write-only image binding found for dimension determination
Pipeline 'deferredLighting' dimensions determined from first write-only binding 'floatColor2': 1728x972
Pipeline 'post': No write-only image binding found for dimension determination
Initializing Tracy profiler...
??Tracy Vulkan context created successfully
??Tracy profiler is now active and collecting GPU data
??Tracy server should be starting on port 8086
??Connect Tracy GUI client to view profiling data
??Download Tracy from: https://github.com/wolfpld/tracy/releases
??Tracy GPU zones and timing collection enabled
Tracy is ENABLED - Attempting to start profiler and web server
Tracy profiler initialized
Calling IApplicationListener::onInit()...
=== Lightweight Test: Initializing ===
Model directory: ../../assets/models
Processing animations and bones before mesh processing...
No animations found in the model
No bones found in any mesh
Synchronized global inverse transform between Model and Animation systems
Loaded embedded texture 0 (2048x2048) with sRGB format
Loaded embedded texture 1 (2048x2048) with linear format
Loaded embedded texture 2 (2048x2048) with linear format
Loaded embedded texture 3 (2048x2048) with linear format
Loaded embedded texture 4 (2048x2048) with linear format
Successfully loaded model: ../../assets/models/DamagedHelmet.glb
  Meshes: 1
  Materials: 2
  Loading time: 132 ms
Scene initialized: 1 nodes (lightweight)
Synced Scene camera to Application camera
  Position: vec3(0.000000, 0.000000, 2.500000)
  Rotation: vec3(0.000000, 180.000000, 0.000000)
BinRenderer initialization complete!
Calling IApplicationListener::onShutdown()...
=== Lightweight Test: Shutdown ===
Cleaning up Tracy context...
Tracy context destroyed
INFO: Cleared all resources from registry
ResourceRegistry destroyed
Saved descriptor pool statistics to DescriptorPoolSize.txt
  (Capped to reasonable limits: 20 sets, 256 descriptors per type)

=== DescriptorPool 할당 통계 ===
생성된 총 풀 수: 9
할당된 총 세트 수: 11
  COMBINED_IMAGE_SAMPLER: 538
  UNIFORM_BUFFER: 18
  STORAGE_BUFFER: 1
  STORAGE_IMAGE: 4
============================================

